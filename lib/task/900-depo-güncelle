#!/bin/bash

[ -z "$X" ] || cd "$X"

prev=$(git show --format='format:%H' HEAD ||:)
if git pull upstream master; then
	case "$(git show --format='format:%H' HEAD)"
	$prev)
		cry "Üst depoda değişiklik yok."
		;;
	*)
		cry "Üst depodaki değişiklikler alındı."
		if yesno "Depo değişiklikleri ana depoua gönderilsin mi? " e; then
			git push --all
		fi
		;;
	esac
else
	cry "Depo güncellemesinde hata oluştu.  Lütfen tekrar denemeden" \
	    "önce hata iletilerini inceleyerek sorunu giderin."
fi
